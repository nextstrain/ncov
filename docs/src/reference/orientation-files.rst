Overview of this repository (i.e., what do these files do?)
===========================================================

The files in this repository fall into one of these categories:

.. contents::
   :local:

Default workflow configuration files
------------------------------------

-  ``defaults/parameters.yaml``: default workflow configuration parameters. Override these settings in the workflow configuration file used by ``--configfile``.
-  ``defaults/auspice_config.json``: default visualization configuration file. Override these settings using ``auspice_config``. `See the customization guide for visualizations <customizing-visualization.md>`__.
-  ``defaults/include.txt``: list of strain names to *include* during subsampling and filtering (one strain name per line)
-  ``defaults/exclude.txt``: list of strain names to *exclude* during subsampling and filtering (one strain name per line)

Custom configuration files
--------------------------

These will be stored in ``my-analyses/``.

- ``my-analyses/.../builds.yaml``: workflow configuration file used by ``--configfile`` where you can define and parameterize the builds you want to run. `See the customization guide <customizing-analysis.md>`__.

Internal workflow definition files
----------------------------------

-  ``Snakefile``: entry point for Snakemake commands that also validates inputs. No modification needed.
-  ``workflow/snakemake_rules/main_workflow.smk``: defines rules for running each step in the analysis. Modify your ``builds.yaml`` file, rather than hardcode changes into the snakemake file itself.
-  ``workflow/envs/nextstrain.yaml``: specifies computing environment needed to run workflow with the ``--use-conda`` flag. No modification needed.
-  ``workflow/schemas/config.schema.yaml``: defines format (e.g., required fields and types) for ``builds.yaml`` files. This can be a useful reference, but no modification needed.
-  ``scripts/``: helper scripts for common tasks. No modification needed.

Non-tracked files
-----------------

These files are not tracked by version control, meaning they are either provided by the user or generated by the workflow.

Input files
~~~~~~~~~~~

-  ``data/metadata.tsv``: tab-delimited description of strain (i.e., sample) attributes
-  ``data/sequences.fasta``: genomic sequences whose ids must match the ``strain`` column in ``metadata.tsv``. `See the data preparation guide <../guides/data-prep.md>`__.

Output files and directories
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

-  ``auspice/<dataset_name>.json``: output file for visualization in Auspice where ``<dataset_name>`` is the name of your output dataset in the workflow configuration file used by ``--configfile``.
-  ``results/aligned.fasta``, etc.: raw results files (dependencies) that are shared across all datasets.
-  ``results/<dataset_name>/``: raw results files (dependencies) that are specific to a single dataset.
-  ``logs/``: Log files with error messages and other information about the run.
-  ``benchmarks/``: Run-times (and memory usage on Linux systems) for each rule in the workflow.

Documentation
-------------

These files are used to generate the `workflow documentation <https://docs.nextstrain.org/projects/ncov/en/latest/>`__.
